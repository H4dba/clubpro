{% extends "base.html" %}
{% load widget_tweaks %}

{% block title %}{{ title }} - Loja{% endblock %}

{% block content %}
<div class="container my-3 my-md-5">
    <div class="row justify-content-center">
        <div class="col-12 col-lg-8">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0 h5 h-md-4">
                        <i class="fas fa-{% if category %}edit{% else %}plus{% endif %} me-2"></i>
                        {{ title }}
                    </h4>
                </div>
                <div class="card-body">
                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        
                        <div class="mb-3">
                            <label class="form-label small small-md-normal">Nome da Categoria *</label>
                            {{ form.name|add_class:"form-control form-control-sm form-control-md-normal" }}
                            {% if form.name.errors %}
                            <div class="text-danger small">{{ form.name.errors }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label small small-md-normal">URL Amigável (Slug)</label>
                            {{ form.slug|add_class:"form-control form-control-sm form-control-md-normal" }}
                            <small class="form-text text-muted small">Deixe vazio para gerar automaticamente</small>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label small small-md-normal">Descrição</label>
                            {{ form.description|add_class:"form-control form-control-sm form-control-md-normal" }}
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label small small-md-normal">Imagem</label>
                            {% if category and category.image %}
                            <div class="mb-2">
                                <img src="{{ category.image.url }}" alt="{{ category.name }}" style="max-height: 150px; max-width: 100%;" class="img-thumbnail">
                            </div>
                            {% endif %}
                            {{ form.image|add_class:"form-control form-control-sm form-control-md-normal" }}
                        </div>
                        
                        <div class="mb-3">
                            <div class="form-check form-switch">
                                {{ form.is_active|add_class:"form-check-input" }}
                                <label class="form-check-label small small-md-normal" for="{{ form.is_active.id_for_label }}">
                                    Categoria Ativa
                                </label>
                            </div>
                            <small class="form-text text-muted small">Categorias inativas não aparecem na loja</small>
                        </div>
                        
                        <div class="d-flex flex-column flex-md-row justify-content-between gap-2 mt-4">
                            <a href="{% url 'shop:admin_category_list' %}" class="btn btn-secondary btn-sm btn-md-normal w-100 w-md-auto">
                                <i class="fas fa-arrow-left me-2"></i>Cancelar
                            </a>
                            <button type="submit" class="btn btn-primary btn-sm btn-md-normal w-100 w-md-auto">
                                <i class="fas fa-save me-2"></i>Salvar Categoria
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .h-md-4 { font-size: 1.5rem !important; }
    .small-md-normal { font-size: 1rem !important; }
    .form-control-md-normal { font-size: 1rem; padding: 0.375rem 0.75rem; }
    .btn-md-normal { font-size: 1rem; padding: 0.375rem 0.75rem; }
    
    @media (max-width: 767px) {
        .h-md-4 { font-size: 1.25rem !important; }
        .small-md-normal { font-size: 0.875rem !important; }
        .form-control-md-normal { font-size: 0.875rem; padding: 0.25rem 0.5rem; }
        .btn-md-normal { font-size: 0.875rem; padding: 0.25rem 0.5rem; }
    }
</style>
{% endblock %}
